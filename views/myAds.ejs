<%-include('partials/miniheader')-%>
<%-include("partials/sidebar")-%>

<head>
  <meta charset="utf-8">
  <title></title>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"
    integrity="sha384-1CmrxMRARb6aLqgBO7yyAxTOQE2AKb9GfXnEo760AUcUmFx3ibVJJAzGytlQcNXd"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/myads.css">
</head>

<body>
  <div class="container" style="margin-left: 15%; z-index: 5;">
    <div class="row" id="main">

      <%if (ads.length==0){%>
      <center>
        <h1>NO ADS TO DISPLAY</h1>
      </center>
      <%} else {%>
      <div class="mainContent row">
      </div>
<!--      <div id='<!%=ad._id%!>' onclick='editad(this)' class="col-md-4 col-sm-12 paddings">-->
<!--        <div class="card bg-danger text-white car mx-auto">-->
<!--          <div class="card-body">-->
<!--            <img class="Img mx-auto" style="text-align: center;" src="/<!%= ad.cover_photo.filename %!>"-->
<!--              alt="/<!%= ad.cover_photo.filename %!>" />-->
<!--            <br />-->
<!--            <label for="title" class="text">Title</label>-->
<!--            <label for="" class="label-text"><!%=ad.title%!>-->
<!--            </label>-->
<!--            <br />-->
<!--            <label for="title">Date posted</label>-->
<!--            <label for="" class="label-text"><!%=ad.date_posted%!></label>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
<!--      <!%})%!>-->
      <%}%>
      <!-- <div class="col-md-4 col-sm-12 paddings">
        <div class="card bg-danger text-white car mx-auto">
          <div class="card-body">
            <img
              class="Img mx-auto"
              style="text-align: center;"
              src="/images/Imagehere.jpg"
              alt=""
            />
            <br />
            <label for="title" class="text">Title</label>
                                    <label for="" class="text title" style="background-color: white;">Sample text here abcd</label
            >
            <br />
            <label for="title">Date posted</label>
                                    <label for="" class="title" style="background-color: white;">No text here</label
            >
          </div>
        </div>
      </div>

      <div class="col-md-4 col-sm-12 paddings">
        <div class="card bg-danger text-white car mx-auto">
          <div class="card-body">
            <img
              class="Img mx-auto"
              style="text-align: center;"
              src="/images/Imagehere.jpg"
              alt=""
            />
            <br />
            <label for="title" class="text">Title</label>
                                    <label for="" class="text title" style="background-color: white;">Sample text here abcd</label
            >
            <br />
            <label for="title">Date posted</label>
                                    <label for="" class="title" style="background-color: white;">No text here</label
            >
          </div>
        </div>
      </div>

      <div class="col-md-4 col-sm-12 paddings">
        <div class="card bg-danger text-white car mx-auto">
          <div class="card-body">
            <img
              class="Img mx-auto"
              style="text-align: center;"
              src="/images/Imagehere.jpg"
              alt=""
            />
            <br />
            <label for="title" class="text">Title</label>
                                    <label for="" class="text title" style="background-color: white;">Sample text here abcd</label
            >
            <br />
            <label for="title">Date posted</label>
                                    <label for="" class="title" style="background-color: white;">No text here</label
            >
          </div>
        </div>
      </div>
      <div class="col-md-4 col-sm-12 paddings">
        <div class="card bg-danger text-white car mx-auto">
          <div class="card-body">
            <img
              class="Img mx-auto"
              style="text-align: center;"
              src="/images/Imagehere.jpg"
              alt=""
            />
            <br />
            <label for="title" class="text">Title</label>
                                    <label for="" class="text title" style="background-color: white;">Sample text here abcd</label
            >
            <br />
            <label for="title">Date posted</label>
                                    <label for="" class="title" style="background-color: white;">No text here</label
            >
          </div>
        </div>
      </div>
      <div class="col-md-4 col-sm-12 paddings">
        <div class="card bg-danger text-white car mx-auto">
          <div class="card-body">
            <img
    // onclick='editad(this)'          class="Img mx-auto"
              style="text-align: center;"
              src="/images/Imagehere.jpg"
              alt=""
            />
            <br />
    // onclick='editad(this)'        <label for="title" class="text">Title</label>
                                    <label for="" class="text title" style="background-color: white;">Sample text here abcd</label
            >
            <br />
            <label for="title">Date posted</label>
                                    <label for="" class="title" style="background-color: white;">No text here</label
            >
          </div>
        </div>
      </div> -->
    </div>
    <button id="next">Next page</button>
  </div>
  <script type="text/javascript">
    function editad(input) {
      var ad = input.id
      $.ajax({
        type: 'GET',
        url: '/sell/editad/' + ad,
        success: function () {
          window.location.href = 'http://localhost:3001/sell/editad/' + ad
        },
        error: function () {
          console.log('fail')
        }
      });
    }
    let data;
    let page =0;
    $.ajax({
      type: 'GET',
      url: '/sell/ad/ad',
      success: function (res) {
        data = [...res];
        console.log(data)
        let s = data.slice(0,2);
        for(let i=0;i<2;i++){
          $(".mainContent").append(
                  "<div id='"+s[i]._id+"' onclick='editad(this)' class='col-md-4 col-sm-12 paddings'>\<div class='card bg-danger text-white car mx-auto'> <div class='card-body'> <img class='Img mx-auto' style='text-align: center;' src='/"+s[i].cover_photo.filename+" %>' />\
                    <br />\
                    <label for='title' class='text'>Title</label>\
                    <label for='' class='label-text'>"+s[i].title+"\
                    </label>\
                    <br />\
                    <label for='title'>Date posted</label>\
                    <label for='' class='label-text'>"+s[i].date_posted+"</label>\
                  </div>\
                </div>\
              </div>")
        }
        },
      error: function (err) {
        console.log(err);
      }
    })
    const main = document.querySelector("#main")
    const first = document.querySelector("#first");
    const previous = document.querySelector("#previous");
    const next = document.querySelector("#next");


    next.addEventListener('click', () => {
      page +=1;
      let s = data.slice(2*page,2*page+2)
      $(".mainContent").empty();
      for (let i = 0; i < 2; i++) {
        $(".mainContent").append(
                "<div id='"+s[i]._id+"' onclick='editad(this)' class='col-md-4 col-sm-12 paddings'>\<div class='card bg-danger text-white car mx-auto'> <div class='card-body'> <img class='Img mx-auto' style='text-align: center;' src='/"+s[i].cover_photo.filename+" %>' />\
                    <br />\
                    <label for='title' class='text'>Title</label>\
                    <label for='' class='label-text'>"+s[i].title+"\
                    </label>\
                    <br />\
                    <label for='title'>Date posted</label>\
                    <label for='' class='label-text'>"+s[i].date_posted+"</label>\
                  </div>\
                </div>\
              </div>")
      }
      })

  </script>
</body>

<%-include('partials/footer')-%>